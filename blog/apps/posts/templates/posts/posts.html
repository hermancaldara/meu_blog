{% extends "base.html" %}

{% load markup %}

{% load disqus_tags %}

{% load taggit_extras %}

{% block estilo %}
  {{ block.super }}
  <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/css/posts.css">
  <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/css/manni.css">
{% endblock estilo %}

{% block conteudo_esquerdo %}
  {% load pagination_tags %}
  {% autopaginate posts 5 %}
  {% for post in posts %}
  
	<div class="post">
	
		<h3><a href="{{ post.get_absolute_url }}">{{ post.titulo }}</a></h3>
		<ul class="post_info">
			<li class="date">Postado em {{ post.publicacao }}</li>
      <li class="comments"><a href="{{ post.get_absolute_url }}#disqus_thread">Comentários</a></li>
      {% disqus_num_replies %}
			{% if post.tags.all %}
        | Tags: 
        {% for tag in post.tags.iterator %}
          {% if not forloop.last %}
            <a href="/tag/{{ tag.name }}">{{ tag.name }}</a> -
          {% else %}      
            <a href="/tag/{{ tag.name }}">{{ tag.name }}</a>
          {% endif %}
        {% endfor %}
      {% endif %}
		</ul>					
		<div class="content">
		  {{ post.conteudo|restructuredtext|safe }}
		</div>

	</div>
	
  {% endfor %}
  {% paginate %}
{% endblock conteudo_esquerdo %}

{% block conteudo_direito %}
  <div id="nuvem">
    <h4><span>Nuvem de</span> tags</h4>
    {% get_tagcloud as tags %}
    {% for tag in tags %}
      <a href='/tag/{{ tag.name }}'><font size={{ tag.weight|floatformat:0 }}>{{tag}}</font></a>
    {% endfor %}
  </div>
  <div id="ultimos_posts">
    <h4><span>Últimos</span> posts</h4>
    {% for post in ultimos_posts %}
      <a href="{{ post.get_absolute_url }}">{{ post.titulo }}</a><br>
    {% endfor %}
  </div>
{% endblock conteudo_direito %}
