{% extends "base.html" %}

{% load comments %}

{% block estilo %}
  {{ block.super }}
  <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/css/posts.css">
{% endblock estilo %}

{% block conteudo_esquerdo %}
  {% load pagination_tags %}
  {% autopaginate posts 5 %}
  {% for post in posts %}
    <div id="post">
      <a id="titulo" href="{{ post.id }}"><h1>{{ post.titulo }}</h1></a>
      {{ post.conteudo|linebreaks }}
      {{ post.publicacao|timesince }} 
      {% if post.tags.all %}
        | 
        {% for tag in post.tags.iterator %}
          {% if not forloop.last %}
            <a href="{{ tag.name }}">{{ tag.name }}</a> -
          {% else %}      
            <a href="{{ tag.name }}">{{ tag.name }}</a>
          {% endif %}
        {% endfor %}
      {% endif %}
      {% get_comment_count for post as contador_comentarios %} <br/><br/>
      {% if contador_comentarios %}
        <a href="{{ post.id }}">{{ contador_comentarios }} comentários.</a>
      {% else %}
        <a href="{{ post.id }}">Nenhum comentário ainda.</a>
      {% endif %}
    </div>
  {% endfor %}
  {% paginate %}
{% endblock conteudo_esquerdo %}

{% block conteudo_direito %}
  <div id="direita">
    <div id="nuvem">
      <p>Nuvem de tags</p>
      {% for tag in tags %}
        <a href="{{ tag }}">{{ tag }}</a>
      {% endfor %}
    </div>
  </div>
{% endblock conteudo_direito %}
